var $=Object.defineProperty;var I=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var O=(e,a,i)=>a in e?$(e,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[a]=i,b=(e,a)=>{for(var i in a||(a={}))L.call(a,i)&&O(e,i,a[i]);if(I)for(var i of I(a))J.call(a,i)&&O(e,i,a[i]);return e};import{N as H,u as K,r as p,o as D,c as E,a as f,b as l,w as m,p as S,d as M,e as v,F as V,f as j,g as z,h as T,s as N,A as Q,i as A,j as R,k as W,l as U,n as Y}from"./vendor.9c5693a3.js";const Z=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const t of n.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&o(t)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}};Z();var q=(e,a)=>{const i=e.__vccOpts||e;for(const[o,r]of a)i[o]=r;return i};const X={components:{NButton:H},setup(){const e=K();return{toMonitor:()=>{e.push({name:"Monitor"})},toMapview:()=>{e.push({name:"Panorama"})}}},methods:{test(){this.toMonitor()},test1(){this.toMapview()}}},G=e=>(S("data-v-474d7328"),e=e(),M(),e),ee={class:"top-bar"},te={class:"left-items",style:{float:"left"}},ae=["src"],ne=G(()=>f("div",{class:"logo-text",style:{float:"left"}},"\u6708\u575B\u8857\u9053\u5927\u6C14\u7CBE\u7EC6\u5316\u7BA1\u7406\u5E73\u53F0",-1)),oe={id:"right-items"},re=v(" \u5168\u666F\u5C55\u793A "),ie=v(" \u7ACB\u4F53\u76D1\u6D4B ");function se(e,a,i,o,r,n){const t=p("n-button");return D(),E("div",ee,[f("div",te,[f("img",{src:"/dqhj_logo.png"},null,8,ae)]),ne,f("div",oe,[l(t,{class:"NButton",onClick:n.test1,type:"primary",dashed:""},{default:m(()=>[re]),_:1},8,["onClick"]),l(t,{class:"NButton",onClick:n.test,type:"primary",dashed:""},{default:m(()=>[ie]),_:1},8,["onClick"])])])}var le=q(X,[["render",se],["__scopeId","data-v-474d7328"]]);const de={name:"App",components:{TopBar:le},setup(){}},ce=e=>(S("data-v-aa1d7f1c"),e=e(),M(),e),me=ce(()=>f("head",null,[f("meta",{"http-equiv":"Content-Security-Policy",content:"upgrade-insecure-requests"})],-1)),ue={id:"topBar"},_e={id:"views"};function pe(e,a,i,o,r,n){const t=p("TopBar"),s=p("router-view"),c=p("n-dialog-provider"),_=p("n-notification-provider"),u=p("n-message-provider"),y=p("n-loading-bar-provider");return D(),E(V,null,[me,l(y,null,{default:m(()=>[l(u,null,{default:m(()=>[l(_,null,{default:m(()=>[l(c,null,{default:m(()=>[f("div",ue,[l(t)]),f("div",_e,[l(s)])]),_:1})]),_:1})]),_:1})]),_:1})],64)}var fe=q(de,[["render",pe],["__scopeId","data-v-aa1d7f1c"]]);const ge="modulepreload",x={},ve="/",he=function(a,i){return!i||i.length===0?a():Promise.all(i.map(o=>{if(o=`${ve}${o}`,o in x)return;x[o]=!0;const r=o.endsWith(".css"),n=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${n}`))return;const t=document.createElement("link");if(t.rel=r?"stylesheet":ge,r||(t.as="script",t.crossOrigin=""),t.href=o,document.head.appendChild(t),r)return new Promise((s,c)=>{t.addEventListener("load",s),t.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>a())},h=j.create({headers:{"Content-Type":"application/json"},timeout:6e4});h.interceptors.request.use(e=>{if(e.method==="get"){const a=e.url;a.indexOf("?")>=0?e.url=`${a}${e.data}`:e.url=`${a}${e.data}`}return e});h.interceptors.response.use(e=>e.data,e=>{const{response:a}=e;if(a)switch(a.status){case 400:window.$vm.$message.error("\u8BF7\u6C42\u65E0\u6548");break;case 401:window.$vm.$message.error({message:"\u5C1A\u672A\u767B\u5F55\u8BF7\u91CD\u65B0\u767B\u5F55"});break;case 403:window.$vm.$message.error("\u60A8\u6CA1\u6709\u6743\u9650\u8FD9\u6837\u505A\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458");break;case 404:window.$vm.$message.error("\u8BF7\u6C42\u672A\u627E\u5230");break;case 500:window.$vm.$message.error("\u7CFB\u7EDF\u5F02\u5E38");break;case 504:window.$vm.$message.error("\u8BF7\u6C42\u8D85\u65F6\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5");break;default:window.$vm.$message.error("\u7CFB\u7EDF\u5F02\u5E38");break}return Promise.reject(e)});function He(e){return h({url:"https://api-qc-data-service.airqualitychina.cn:9998/maintain/device_qc_data?json=",method:"GET",data:e})}function Ke(e){return h({url:"https://dev-site-api.airqualitychina.cn:9998/devsite/getImagesByDevsite?token=qiYrxXEv5mJPW6-dU5_wQdId_WZE2SXGPbCQ6liK0XEwg4wLheerdJZ6xrqBkEC4jOWbtqSTZRPZtc4W4fqoS0DquTKr7K1okm5tOnVjvmEbxsiXnEwdq5WMYGM8bzpyknP3uplGOnrbffunfFJpQQvIHV7ILPKYpAFyJdOxf5zBpfMVuLE0m5yBF1JOBzyIUOMtvMWPf4uSuyE-lOEC2wPmXvHnm6Ry9s6SqiafwcKXLciIFVZ3JqkYiiDcvVB9TnC3TUH1UooAmjhk3AH2wQ==&devsite_code=",method:"GET",data:e})}function B(e){return h({url:"https://api-qc-data-service.airqualitychina.cn:9998/maintain/regoin_qc_data_gis?json=",method:"GET",data:e})}function ye(){return h({url:"https://api-qc-data-service.airqualitychina.cn:9998/maintain/get_qc_maxtime?json=",method:"GET",data:'{"token":"qiYrxXEv5mJPW6-dU5_wQdp8SsiVs57z8ira8KcUOZIwg4wLheerdJZ6xrqBkEC4jOWbtqSTZRPZtc4W4fqoS0DquTKr7K1okm5tOnVjvmEbxsiXnEwdq5WMYGM8bzpyknP3uplGOnrbffunfFJpQQvIHV7ILPKYpAFyJdOxf5zBpfMVuLE0m5yBF1JOBzyIUOMtvMWPf4uSuyE-lOEC2wPmXvHnm6Ry9s6SqiafwcKXLciIFVZ3JqkYiiDcvVB9TnC3TUH1UooAmjhk3AH2wQ=="}'})}function Ve(e){return h({url:"https://api-qc-data-service.airqualitychina.cn:9998/maintain/regoin_qc_data_page?json=",method:"GET",data:e})}function je(e){return h({url:"https://api-qc-data-service.airqualitychina.cn:9998/maintain/regoin_qc_data_hotmap_download?json=",method:"GET",data:e})}function k(e){if(e==null)return null;let a=new Date(parseInt(e)),i=1900+a.getYear(),o="0"+(a.getMonth()+1),r="0"+a.getDate(),n="0"+a.getHours();""+a.getMinutes();let t=a.getSeconds();return t.toString().length<2&&(t="0"+t),i+"-"+o.substring(o.length-2,o.length)+"-"+r.substring(r.length-2,r.length)+"+"+n.substring(n.length-2,n.length)+":00:00"}function C(e){if(e==null)return null;let a=new Date(e),i=1900+a.getYear(),o="0"+(a.getMonth()+1),r="0"+a.getDate();return i+"-"+o.substring(o.length-2,o.length)+"-"+r.substring(r.length-2,r.length)}function ze(e){return e==null?null:e.substring(11,16)}function Ne(e){return e==null?null:e.substring(5,10)}function Qe(e){return e==null?null:e.substring(0,7)}function be(e){return e==null?null:Date.parse(e)}function ke(e){return e<0?-1:e<=35?0:e<=75?1:e<=115?2:e<=150?3:e<=250?4:5}const d=z({token:"qiYrxXEv5mJPW6-dU5_wQdp8SsiVs57z8ira8KcUOZIwg4wLheerdJZ6xrqBkEC4jOWbtqSTZRPZtc4W4fqoS0DquTKr7K1okm5tOnVjvmEbxsiXnEwdq5WMYGM8bzpyknP3uplGOnrbffunfFJpQQvIHV7ILPKYpAFyJdOxf5zBpfMVuLE0m5yBF1JOBzyIUOMtvMWPf4uSuyE-lOEC2wPmXvHnm6Ry9s6SqiafwcKXLciIFVZ3JqkYiiDcvVB9TnC3TUH1UooAmjhk3AH2wQ==",projectCode:"169",timeType:"1h",polType:"134004",hasCamera:"",devsiteProp:"2",dataTime:(Date.now()/36e5).toFixed()*36e5,admId:"110102007",admLevel:"4"});var g=null,F;const we={name:"mapcomtaint",setup(){const e=T(!1),a=N(null),i=T(null);ye().then(n=>{console.log(n),d.dataTime=be(n.result),console.log(d.dataTime)});const o=()=>{d.timeType=="1h"?d.dataTime+=36e5:d.dataTime+=864e5,console.log(d.dataTime);let n=b({},d);d.timeType=="1h"?n.dataTime=k(n.dataTime):n.dataTime=C(n.dataTime),console.log(JSON.stringify(n)),r(n)},r=n=>{B(JSON.stringify(n)).then(t=>{var s=g.getAllOverlays("marker");console.log(s),g.remove(s),console.log(t),console.log("getRegionQCData OK"),t.result.forEach(function(c){c.data[0].values[0].qc_value<0||AMap.convertFrom([c.lng,c.lat],"gps",function(_,u){if(u.info==="ok"){console.log("convertFrom \u5750\u6807\u8F6C\u6362 OK");var y='<div class="marker"></div><div class="marker_label">'+c.data[0].values[0].qc_value.toFixed()+"</br>"+c.name+"</div>";let w=new AMap.Marker({content:y,position:[u.locations[0].lng,u.locations[0].lat]});g.add(w)}})})})};return{formRef:i,size:T("medium"),map:a,data:d,nextFunc:o,loading:e,timeDisabled(n){const t=new Date(n).getDate();return console.log(t<15),{isMinuteDisabled:s=>s>0,isSecondDisabled:s=>s>0}},rules:{pointName:{required:!0,trigger:["blur","input"],message:"\u8BF7\u8F93\u5165\u70B9\u4F4D\u540D\u79F0/\u70B9\u4F4DID"}},handleDayFormSwitch(n){n.preventDefault();var t=document.getElementById("panorama_form_item_datetime");t.style.display="none",t=document.getElementById("panorama_form_item_date"),t.style.display="block",d.timeType="1d";let s=b({},d);s.dataTime=C(s.dataTime),console.log(JSON.stringify(s)),r(s)},handleHourFormSwitch(n){n.preventDefault();var t=document.getElementById("panorama_form_item_date");t.style.display="none",t=document.getElementById("panorama_form_item_datetime"),t.style.display="block",d.timeType="1h";let s=b({},d);s.dataTime=k(s.dataTime),console.log(JSON.stringify(s)),r(s)},handleFormLastClick(n){n.preventDefault(),d.timeType=="1h"?d.dataTime-=36e5:d.dataTime-=864e5,console.log(d.dataTime);let t=b({},d);d.timeType=="1h"?t.dataTime=k(t.dataTime):t.dataTime=C(t.dataTime),console.log(JSON.stringify(t)),r(t)},handleFormNextClick(n){n.preventDefault(),o()},handleFormPlayClick(n){n.preventDefault();let t=document.getElementById("panorama_play_btn");t.style.display="none",t=document.getElementById("panorama_stop_btn"),t.style.display="block",F=setInterval(o,1*1e3)},handleFormStopClick(n){n.preventDefault();let t=document.getElementById("panorama_play_btn");t.style.display="block",t=document.getElementById("panorama_stop_btn"),t.style.display="none",clearInterval(F)}}},create(){},methods:{ininMap(){Q.load({key:"4802a5f88a46631c672d7498a98e59a8",version:"2.0",plugins:["AMap.ToolBar","AMap.Driving","AMap.DistrictSearch"],AMapUI:{version:"1.1",plugins:[]},Loca:{version:"2.0.0"}}).then(e=>{g=new e.Map("panorama_map_container",{viewMode:"3D",zoom:12,zooms:[2,22],center:[116.347,39.91]});var a=document.getElementById("panorama_form_item_date");a.style.display="none",a=document.getElementById("panorama_form_item_datetime"),a.style.display="block",a=document.getElementById("panorama_stop_btn"),a.style.display="none",d.timeType="1h";let i=b({},d);i.dataTime=k(i.dataTime),console.log(JSON.stringify(i)),B(JSON.stringify(i)).then(t=>{console.log(t),console.log("getRegionQCData OK"),t.result.forEach(function(s){s.data[0].values[0].qc_value<0||e.convertFrom([s.lng,s.lat],"gps",function(c,_){if(_.info==="ok"){console.log("convertFrom \u5750\u6807\u8F6C\u6362 OK");var u='<div class="marker_type_'+ke(s.data[0].values[0].qc_value)+'"></div><div class="marker_label">'+s.data[0].values[0].qc_value.toFixed()+"</br>"+s.name+"</div>";let y=new e.Marker({content:u,position:[_.locations[0].lng,_.locations[0].lat]});g.add(y)}})})});var o=new e.ImageLayer({bounds:new e.Bounds([116.33446645401432,39.897422578744],[116.36063757117489,39.91858235094773]),url:"https://raw.githubusercontent.com/MorphKyan/vitejs-vite-xd9bsg/master/src/assets/yuetan.png",zIndex:6,zooms:[12,18]});g.add(o),g.setFitView(o);var r={subdistrict:2,extensions:"all",level:"district"},n=new e.DistrictSearch(r);n.search("\u897F\u57CE\u533A",function(t,s){console.log("DistrictSearch:",t);var c=[],_=s.districtList[0].boundaries;if(_)for(var u=0,y=_.length;u<y;u++){var w=new e.Polygon({strokeWeight:1,path:_[u],fillOpacity:.4,fillColor:"#80d8ff",strokeColor:"#0091ea",zooms:[10,14]});c.push(w)}g.add(c)}),console.log("load finish!")}).catch(e=>{console.log(e)})},addMarker(){}},mounted(){this.ininMap()}},P=e=>(S("data-v-15f507b6"),e=e(),M(),e),Te={class:"home_div"},Ce=P(()=>f("div",{id:"panorama_map_container"},null,-1)),De={class:"bottom-bar"},Ee=v(" \u65E5 "),Se=v(" \u65F6 "),Me=v(" \u2B9C"),qe=v(" \u2B9E "),Ie=v(" \u1405 "),Oe=v(" \u2016 "),xe=P(()=>f("img",{id:"air_color_img",src:"https://github.com/MorphKyan/vitejs-vite-xd9bsg/raw/master/src/assets/air_color.png"},null,-1));function Be(e,a,i,o,r,n){const t=p("n-button"),s=p("n-date-picker"),c=p("n-form-item"),_=p("n-form");return D(),E("div",Te,[Ce,f("div",De,[l(t,{class:"switch_btn","attr-type":"button",onClick:o.handleDayFormSwitch},{default:m(()=>[Ee]),_:1},8,["onClick"]),l(t,{class:"switch_btn","attr-type":"button",onClick:o.handleHourFormSwitch},{default:m(()=>[Se]),_:1},8,["onClick"]),l(_,{id:"panorama_form",ref:"formRef",model:o.data,rules:o.rules,inline:!0,"show-label":!1,"label-width":"auto","require-mark-placement":"right-hanging",size:o.size,"show-feedback":!1},{default:m(()=>[l(c,{id:"panorama_form_item_date",class:"panorama_form_item",path:"dataTime"},{default:m(()=>[l(s,{value:o.data.dataTime,"onUpdate:value":a[0]||(a[0]=u=>o.data.dataTime=u),"value-format":"yyyy-MM-dd HH:00:00",type:"date"},null,8,["value"])]),_:1}),l(c,{id:"panorama_form_item_datetime",class:"panorama_form_item",path:"dataTime"},{default:m(()=>[l(s,{value:o.data.dataTime,"onUpdate:value":a[1]||(a[1]=u=>o.data.dataTime=u),"value-format":"yyyy-MM-dd HH:00:00",type:"datetime","is-time-disabled":o.timeDisabled},null,8,["value","is-time-disabled"])]),_:1}),l(c,{class:"panorama_form_item"},{default:m(()=>[l(t,{"attr-type":"button",onClick:o.handleFormLastClick},{default:m(()=>[Me]),_:1},8,["onClick"])]),_:1}),l(c,{class:"panorama_form_item"},{default:m(()=>[l(t,{"attr-type":"button",onClick:o.handleFormNextClick},{default:m(()=>[qe]),_:1},8,["onClick"])]),_:1}),l(c,{id:"panorama_play_btn",class:"panorama_form_item"},{default:m(()=>[l(t,{"attr-type":"button",onClick:o.handleFormPlayClick},{default:m(()=>[Ie]),_:1},8,["onClick"])]),_:1}),l(c,{id:"panorama_stop_btn",class:"panorama_form_item"},{default:m(()=>[l(t,{"attr-type":"button",onClick:o.handleFormStopClick},{default:m(()=>[Oe]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules","size"]),xe])])}var Fe=q(we,[["render",Be],["__scopeId","data-v-15f507b6"]]);const Pe=[{path:"/",name:"Panorama",component:Fe},{path:"/",name:"Monitor",component:()=>he(()=>import("./Monitor.cbc709cf.js"),["assets/Monitor.cbc709cf.js","assets/Monitor.34d11ef7.css","assets/vendor.9c5693a3.js"])}],$e=A({history:R(),routes:Pe});window._AMapSecurityConfig={securityJsCode:"f00e6cfd51f24bd71fd1dc498523bca0"};W(fe).use(U()).use(Y).use($e).mount("#app");export{q as _,ye as a,be as b,Ve as c,C as d,je as e,k as f,B as g,Qe as h,Ne as i,ze as j,Ke as k,He as l,ke as m};
